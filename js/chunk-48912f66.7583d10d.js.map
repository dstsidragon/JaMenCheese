{"version":3,"sources":["webpack:///./src/views/Login.vue?804e","webpack:///./src/views/Login.vue","webpack:///./src/components/LoginPart.vue","webpack:///./src/components/LoginPart.vue?2d84","webpack:///./src/views/Login.vue?e63b"],"names":["class","src","alt","ref","getLoginEmitData","statusprompt","statusPromptLogin","statu-bool","statuBoolLogin","login-in-fall-or-success","loginInFallOrSuccess","chk-menu","chkMenu","for","id","type","sendData","errors","showStatus","statusPrompt","statuBool","placeholder","name","rules","isEmail","username","password","emits","props","data","user","methods","this","admin","$emit","value","mail","test","watch","render","components","Login","passwordRepit","statusPromptSignup","statuBoolSignup","signUpFallOrSuccess","login","myreg","adminInfo","$http","post","then","res","success","token","expired","message","document","cookie","Date","split","config","$router","push","catch","err","e","signup","confirm_password","url","response","code","getSignupEmitData","chkMenuData","$refs","loginForm","resetForm","Signup","signupForm","ForgetPassword","forgetForm","__scopeId"],"mappings":"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","file":"js/chunk-48912f66.7583d10d.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=2b168b28&lang=scss&scoped=true\"","<template>\n  <header\n    class=\"banner mt-navbar d-flex justify-content-center align-items-center\"\n  >\n    <div class=\"text-white bg-img-transparent rounded p-2\">\n      <h2 class=\"text-center fz-2 fz-md-4\">會員登入</h2>\n      <p class=\"fz-0 fz-md-1\">人生須知負責任的苦處，才能知道盡責任的樂趣。</p>\n    </div>\n  </header>\n\n  <div class=\"mt-5\">\n    <div class=\"container rounded bg-light\">\n      <!-- 頁籤 -->\n      <div class=\"row\">\n        <img\n          class=\"col-6 d-none d-md-block\"\n          src=\"https://storage.googleapis.com/vue-course-api.appspot.com/sim322on/1627379482361.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=k4X8vbeMvFFpSiehNH6tYQVcTHx6m2%2B5V%2FA45OXAzAiN5K7HP8ol8Bch9COURdKQhPXRtNOL9%2FSAOvHfBrrvVWTs0gpb8WF2cdcuQWInmadjJGhcUZdr70krygrBEWThLlznLAsM35L4xaVoRGB242l7s%2BDZnNuQvtNaWt3j8YGfc9VRtySLbtrI1uPRXGxgF8KwMN9ZZoTNLYfTXVd1SLQvkrx%2FC%2Fzb3JFla7QVynfaQoU4pl26agIhvZZhUmxhY5WXpZeQmaQZ1gKNSQYyVr%2BtXXJRnvXVabJVP14OF366jBZ6kKbDg81wrsI6GbjRBFMC23d9CkIPf3WQ4Ndo4Q%3D%3D\"\n          alt=\"login-img\"\n        />\n        <div class=\"col-md-6\">\n          <!-- 登入元件 -->\n          <Login\n            ref=\"Login\"\n            @login-emit=\"getLoginEmitData\"\n            :statusprompt=\"statusPromptLogin\"\n            :statu-bool=\"statuBoolLogin\"\n            :login-in-fall-or-success=\"loginInFallOrSuccess\"\n            :chk-menu=\"chkMenu\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Login from '@/components/LoginPart.vue';\n\nexport default {\n  components: {\n    Login,\n  },\n  data() {\n    return {\n      // 信箱\n      username: '',\n      // 密碼\n      password: '',\n      passwordRepit: '',\n      // 註冊提示\n      statusPromptSignup: '',\n      // 登入提示\n      statusPromptLogin: '',\n      // 註冊狀態\n      statuBoolSignup: '',\n      // 登入狀態\n      statuBoolLogin: '',\n      // 註冊錯誤或成功\n      signUpFallOrSuccess: '',\n      // 登入錯誤或成功\n      loginInFallOrSuccess: '',\n      // 切換選單\n      chkMenu: '',\n    };\n  },\n  methods: {\n    // 登入\n    login() {\n      // 信箱驗證\n      const myreg = /^([a-zA-Z0-9_.\\-+])+@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n      const adminInfo = {\n        username: this.username,\n        password: this.password,\n      };\n\n      if (\n        this.username !== ''\n        && myreg.test(this.username)\n        && this.password !== ''\n      ) {\n        // 送出登入帳號資料做驗證\n        this.$http\n          .post(`${process.env.VUE_APP_API}/admin/signin`, adminInfo)\n          .then((res) => {\n            if (res.data.success) {\n              const [token, expired] = [res.data.token, res.data.expired];\n              this.statusPromptLogin = `${res.data.message}!!`;\n              this.statuBoolLogin = true;\n              // 存到cookies\n              document.cookie = `hexToken=${token};\n                expires=${new Date(expired * 1000)};\n                username=${this.username}`;\n              document.cookie = `username=${this.username.split('@')[0]};\n                expires=${new Date(expired * 1000)};`;\n              document.cookie = `email=${res.config.data.split('\"')[3]};\n                expires=${new Date(expired * 1000)};`;\n\n              this.$router.push('/admin');\n              // 傳入變化的時間 讓元件的watch監聽\n              this.loginInFallOrSuccess = new Date();\n            } else {\n              this.password = '';\n              this.statusPromptLogin = `${res.data.message}!!請檢查帳號密碼!`;\n              this.statuBoolLogin = false;\n              this.loginInFallOrSuccess = new Date();\n            }\n          })\n          .catch((err) => {\n            this.statusPromptLogin = `${err.data.message}!!請檢查帳號密碼!`;\n            this.statuBoolLogin = false;\n            this.loginInFallOrSuccess = new Date();\n          });\n      } else {\n        this.username = '';\n        this.password = '';\n        this.statusPromptLogin = '帳號密碼錯誤!';\n        this.statuBoolLogin = false;\n        this.loginInFallOrSuccess = new Date();\n      }\n    },\n    // 取得loginEmit\n    getLoginEmitData(e) {\n      this.username = e.username;\n      this.password = e.password;\n\n      // 登入\n      this.login();\n    },\n\n    // 註冊\n    signup() {\n      // 信箱驗證\n      const myreg = /^([a-zA-Z0-9_.\\-+])+@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n      const adminInfo = {\n        username: this.username,\n        password: this.password,\n        confirm_password: this.passwordRepit,\n      };\n\n      if (\n        this.username !== ''\n        && myreg.test(this.username)\n        && this.password !== ''\n        && this.passwordRepit !== ''\n      ) {\n        const url = `${process.env.VUE_APP_API}/signup`;\n        this.$http\n          .post(url, adminInfo)\n          .then((res) => {\n            if (res.data.success) {\n              this.statusPromptSignup = `${res.data.message}!!`;\n              // 改變狀態顏色\n              this.statuBoolSignup = true;\n\n              // 傳入變化的時間 讓元件的watch監聽\n              this.signUpFallOrSuccess = new Date();\n            } else {\n              this.password = '';\n              this.statusPromptSignup = `${res.data.message}!!請檢查帳號密碼!`;\n              this.statuBoolSignup = false;\n              // 傳入變化的時間 讓元件的watch監聽\n              this.signUpFallOrSuccess = new Date();\n            }\n          })\n          .catch((err) => {\n            if (err.response.data.code === 'auth/weak-password') {\n              this.username = '';\n              this.password = '';\n              this.passwordRepit = '';\n              this.statusPromptSignup = '密碼強度太弱!! 請填入6~20位英數字';\n              this.statuBoolSignup = false;\n              // 傳入變化的時間 讓元件的watch監聽\n              this.signUpFallOrSuccess = new Date();\n            } else if (err.response.data.code === 'auth/email-already-in-use') {\n              this.username = '';\n              this.password = '';\n              this.passwordRepit = '';\n              this.statusPromptSignup = '帳號已經被使用!!';\n              this.statuBoolSignup = false;\n              // 傳入變化的時間 讓元件的watch監聽\n              this.signUpFallOrSuccess = new Date();\n            }\n          });\n      } else {\n        this.username = '';\n        this.password = '';\n        this.passwordRepit = '';\n        this.statusPromptSignup = '輸入格式錯誤!!';\n        this.statuBoolSignup = false;\n        // 傳入變化的時間 讓元件的watch監聽\n        this.signUpFallOrSuccess = new Date();\n      }\n    },\n    // 取得signupEmit\n    getSignupEmitData(e) {\n      this.username = e.username;\n      this.password = e.password;\n      this.passwordRepit = e.passwordRepit;\n\n      // 註冊\n      this.signup();\n    },\n    // 刷新表單\n    chkMenuData() {\n      // 刷新表單\n      this.$refs.Login.$refs.loginForm.resetForm();\n      this.$refs.Signup.$refs.signupForm.resetForm();\n      this.$refs.ForgetPassword.$refs.forgetForm.resetForm();\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.banner {\n  background: center center no-repeat\n    url('https://storage.googleapis.com/vue-course-api.appspot.com/sim322on/1627379580824.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=la0v1pP%2BJ1RInA9HHMzAzDwQW83AAm%2FVaQ4XRtLNOaZODjzYQpc5apcsCUcOYtHywfrhm1P0KxYNEtcTXiozIRX4JCTczDTiZhV%2BEYx1xFo0%2BuPYt4T3teAm%2BY6Ud42L3Bp56A75Zrc%2BmRYNSPNGJ%2FCYMVH3AjdXAlk%2FJLoSg7B1Uy%2FFTwpaX8yJyeXArSz%2BKoVFToRdsgfj3ccE6%2FK23Z70nvQZ0RO3pPrGRvgattju97%2B4mnz3LCLXG%2BpmYnpq1k4iNprFiDqWOYKAtwLgEwBslhXL7JGyHoWxiwjxwXrObdd30C7Qhtnd9Epd9w7QJpkcJLL%2FePKojePBJ67xNg%3D%3D');\n  height: 340px;\n  background-size: cover;\n  background-attachment: fixed;\n}\n\n@media (max-width: 768px) {\n  .banner {\n    height: 170px;\n  }\n}\n</style>\n","<template>\n  <Form\n    class=\"form-signin\"\n    ref=\"loginForm\"\n    v-slot=\"{ errors }\"\n    @submit=\"sendData\"\n  >\n    <div class=\"form-floating mb-3\">\n      <div v-if=\"showStatus\" class=\"text-center fs-3\">{{ statusPrompt }}</div>\n      <div\n        v-else\n        class=\"text-center\"\n        :class=\"statuBool ? 'alert alert-success' : 'alert alert-danger'\"\n      >\n        {{ statusprompt }}\n      </div>\n    </div>\n    <div class=\"form-floating mb-3\">\n      <Field\n        type=\"email\"\n        class=\"form-control\"\n        id=\"login-username\"\n        placeholder=\"name@example.com\"\n        name=\"信箱\"\n        :class=\"{ 'is-invalid': errors['信箱'] }\"\n        :rules=\"isEmail\"\n        v-model=\"username\"\n      />\n      <ErrorMessage name=\"信箱\" class=\"invalid-feedback\" />\n      <label for=\"login-username\">Email address</label>\n    </div>\n    <div class=\"form-floating\">\n      <Field\n        type=\"password\"\n        class=\"form-control\"\n        id=\"login-password\"\n        placeholder=\"Password\"\n        name=\"密碼\"\n        :class=\"{ 'is-invalid': errors['密碼'] }\"\n        rules=\"required\"\n        v-model=\"password\"\n      />\n      <ErrorMessage name=\"密碼\" class=\"invalid-feedback\" />\n      <label for=\"login-password\">Password</label>\n    </div>\n    <button\n      class=\"btn btn-lg btn-success w-100 mt-90\"\n      id=\"btn-form\"\n      type=\"submit\"\n    >\n      登入\n    </button>\n  </Form>\n</template>\n\n<script>\nexport default {\n  emits: ['login-emit'],\n  props: ['statusprompt', 'statuBool', 'loginInFallOrSuccess'],\n  data() {\n    return {\n      user: {},\n      statusPrompt: '帳號登入',\n      showStatus: true,\n      username: '',\n      password: '',\n    };\n  },\n  methods: {\n    //   送出資料\n    sendData() {\n      this.showStatus = true;\n      const admin = {\n        username: this.username,\n        password: this.password,\n      };\n      this.$emit('login-emit', admin);\n    },\n    // 驗證信箱格式\n    isEmail(value) {\n      const mail = /^([a-zA-Z0-9_.\\-+])+@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n      return mail.test(value) ? true : '需要輸入正確的信箱';\n    },\n  },\n  watch: {\n    // 收到回傳登入成功失敗資料 改變showStatus\n    loginInFallOrSuccess() {\n      this.showStatus = this.statuBool;\n    },\n  },\n};\n</script>\n","import { render } from \"./LoginPart.vue?vue&type=template&id=7e68c2e2\"\nimport script from \"./LoginPart.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Login.vue?vue&type=template&id=2b168b28&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=2b168b28&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2b168b28\"\n\nexport default script"],"sourceRoot":""}