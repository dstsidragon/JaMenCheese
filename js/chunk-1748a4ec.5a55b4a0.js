(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1748a4ec"],{"309d":function(e,t,a){},"566a":function(e,t,a){"use strict";a("989e")},"989e":function(e,t,a){},"98ab":function(e,t,a){"use strict";var c=a("7a23"),s=Object(c["withScopeId"])("data-v-0f73eafc");Object(c["pushScopeId"])("data-v-0f73eafc");var o={class:"row animate__animated animate__fadeInDown z-index-1100"},n={class:"col"},r=Object(c["createVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},[Object(c["createVNode"])("symbol",{id:"check-circle-fill",fill:"currentColor",viewBox:"0 0 16 16"},[Object(c["createVNode"])("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75\n         0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06\n          1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})]),Object(c["createVNode"])("symbol",{id:"exclamation-triangle-fill",fill:"currentColor",viewBox:"0 0 16 16"},[Object(c["createVNode"])("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98\n         1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0\n          .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905\n           0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})])],-1),l={key:0,class:"alert alert-primary d-flex align-items-center",role:"alert"},i=Object(c["createVNode"])("svg",{class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Success:"},[Object(c["createVNode"])("use",{"xlink:href":"#check-circle-fill"})],-1),d={key:1,class:"alert alert-danger d-flex align-items-center",role:"alert"},u=Object(c["createVNode"])("svg",{class:"bi flex-shrink-0 me-2",width:"24",height:"24",role:"img","aria-label":"Danger:"},[Object(c["createVNode"])("use",{"xlink:href":"#exclamation-triangle-fill"})],-1);Object(c["popScopeId"])();var b=s((function(e,t,a,s,b,p){return Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("div",n,[r,b.Is_succes?(Object(c["openBlock"])(),Object(c["createBlock"])("div",l,[i,Object(c["createVNode"])("div",null,Object(c["toDisplayString"])(b.alertMessage),1)])):(Object(c["openBlock"])(),Object(c["createBlock"])("div",d,[u,Object(c["createVNode"])("div",null,Object(c["toDisplayString"])(b.alertMessage),1)]))])])})),p={props:["message","status"],data:function(){return{alertMessage:"",Is_succes:!1}},mounted:function(){this.alertMessage=this.message,this.Is_succes=this.status}};a("566a");p.render=b,p.__scopeId="data-v-0f73eafc";t["a"]=p},b0c0:function(e,t,a){var c=a("83ab"),s=a("9bf2").f,o=Function.prototype,n=o.toString,r=/^\s*function ([^ (]*)/,l="name";c&&!(l in o)&&s(o,l,{configurable:!0,get:function(){try{return n.call(this).match(r)[1]}catch(e){return""}}})},b84e:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("99af");var c=a("7a23"),s=Object(c["withScopeId"])("data-v-a4a6446e");Object(c["pushScopeId"])("data-v-a4a6446e");var o={class:"container mt-5"},n={class:"row"},r={class:"col-md-8"},l={class:"col-md-6"},i=Object(c["createVNode"])("label",{for:"name",class:"form-label d-flex"},"姓名:",-1),d={class:"col-md-6"},u=Object(c["createVNode"])("label",{for:"tel",class:"form-label d-flex"},"電話:",-1),b={class:"col-md-6"},p=Object(c["createVNode"])("label",{for:"email",class:"form-label d-flex"},"信箱:",-1),m={class:"col-md-6"},f=Object(c["createVNode"])("label",{for:"island",class:"form-label d-flex"},"本島/離島:",-1),h=Object(c["createVNode"])("div",{class:"form-check form-check-inline"},[Object(c["createVNode"])("input",{class:"form-check-input",type:"radio",checked:"",name:"inlineRadioOptions",id:"inlineRadio1",value:"本島"}),Object(c["createVNode"])("label",{class:"form-check-label",for:"inlineRadio1"},"本島")],-1),j=Object(c["createVNode"])("div",{class:"form-check form-check-inline"},[Object(c["createVNode"])("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",value:"離島"}),Object(c["createVNode"])("label",{class:"form-check-label",for:"inlineRadio2"},"離島")],-1),O={class:"col-12"},g=Object(c["createVNode"])("label",{for:"address",class:"form-label d-flex"},"地址:",-1),V={class:"col-12"},N=Object(c["createVNode"])("label",{for:"text",class:"form-label d-flex"},"留言:",-1),v={class:"\n              d-none d-md-flex\n              flex-wrap\n              justify-content-center justify-content-sm-between\n            "},y=Object(c["createVNode"])("span",null,"返回購物車",-1),x=Object(c["createVNode"])("span",null,"送出訂單",-1),S={class:"w-100 mobile-fixed d-md-none bg-white"},M={class:"d-flex justify-content-between row"},k={class:"\n                  col-7\n                  fz-0\n                  d-flex\n                  justify-content-around\n                  align-items-center\n                  border-top\n                "},w=Object(c["createVNode"])("p",{class:"mb-0"},"總計:",-1),L={class:"fz-2 mb-0 text-danger fw-bold"},C=Object(c["createVNode"])("span",null,"送出訂單",-1),D={class:"col-md-4"},_={class:"p-3 border border-primary"},z=Object(c["createVNode"])("li",null,"訂單明細",-1),$={class:"card border-0 mb-3 text-dark bg-white",style:{"max-width":"540px"}},T={class:"row g-0"},B={class:"col-2"},I={class:"col-10"},U={class:"card-title fz-1 m-0 text-start p-2"},A={class:"d-flex justify-content-between px-2"},R={class:"card-text m-0"},F={class:"text-muted"},q={class:"card-text"},P=Object(c["createVNode"])("li",null,[Object(c["createVNode"])("hr")],-1),E=Object(c["createVNode"])("button",{type:"submit",class:"btn btn-outline-primary btn-right fz-0",id:"button-coupon"}," 套用優惠碼 ",-1),Z={class:"d-flex justify-content-between align-items-center"},J=Object(c["createVNode"])("p",{class:"mb-0"},"小計:",-1),X={class:"mb-0"},G={class:"d-flex justify-content-between align-items-center"},H=Object(c["createVNode"])("p",{class:"mb-0"},"運費:",-1),K={class:"mb-0"},Q={class:"d-flex justify-content-between align-items-center"},W=Object(c["createVNode"])("p",{class:"mb-0"},"優惠折抵:",-1),Y={class:"mb-0"},ee=Object(c["createVNode"])("li",null,[Object(c["createVNode"])("hr")],-1),te={class:"fz-1 d-flex justify-content-between align-items-center"},ae=Object(c["createVNode"])("p",{class:"mb-0"},"總計:",-1),ce={class:"fz-2 mb-0 text-danger fw-bold"},se=Object(c["createVNode"])("hr",null,null,-1);Object(c["popScopeId"])();var oe=s((function(e,t,a,oe,ne,re){var le=Object(c["resolveComponent"])("Alert"),ie=Object(c["resolveComponent"])("Field"),de=Object(c["resolveComponent"])("ErrorMessage"),ue=Object(c["resolveComponent"])("Form"),be=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("div",o,[Object(c["createVNode"])("div",null,[ne.alertMessage?(Object(c["openBlock"])(),Object(c["createBlock"])(le,{key:0,class:"alert-position",message:ne.alertMessage,status:ne.alertStatus},null,8,["message","status"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])(ue,{ref:"creatForm",class:"row g-3",onSubmit:re.sendOrder},{default:s((function(a){var o=a.errors;return[Object(c["createVNode"])("div",l,[i,Object(c["createVNode"])(ie,{id:"name",ref:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":o["姓名"]}],placeholder:"請輸入 姓名",rules:"required",modelValue:ne.userData.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return ne.userData.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(de,{name:"姓名",class:"invalid-feedback d-flex"})]),Object(c["createVNode"])("div",d,[u,Object(c["createVNode"])(ie,{id:"tel",ref:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":o["電話"]}],placeholder:"請輸入 手機號碼",rules:re.isPhone,modelValue:ne.userData.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ne.userData.user.tel=e})},null,8,["class","rules","modelValue"]),Object(c["createVNode"])(de,{name:"電話",class:"invalid-feedback d-flex"})]),Object(c["createVNode"])("div",b,[p,Object(c["createVNode"])(ie,{id:"email",ref:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":o["信箱"]}],placeholder:"請輸入 信箱",rules:re.isEmail,modelValue:ne.userData.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return ne.userData.user.email=e})},null,8,["class","rules","modelValue"]),Object(c["createVNode"])(de,{name:"信箱",class:"invalid-feedback d-flex"})]),Object(c["createVNode"])("div",m,[f,Object(c["createVNode"])(ie,{id:"island",ref:"island",name:"本島/離島",as:"radio",class:["form-control border-0",{"is-invalid":o["本島/離島"]}],rules:"required",modelValue:ne.island,"onUpdate:modelValue":t[4]||(t[4]=function(e){return ne.island=e})},{default:s((function(){return[h,j]})),_:2},1032,["class","modelValue"]),Object(c["createVNode"])(de,{name:"本島/離島",class:"invalid-feedback d-flex"})]),Object(c["createVNode"])("div",O,[g,Object(c["createVNode"])(ie,{id:"address",ref:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":o["地址"]}],placeholder:"請輸入 地址",rules:"required",modelValue:ne.userData.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return ne.userData.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(de,{name:"地址",class:"invalid-feedback d-flex"})]),Object(c["createVNode"])("div",V,[N,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{type:"text",id:"text",placeholder:"請輸入想說的話",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=function(e){return ne.userData.message=e})},null,512),[[c["vModelText"],ne.userData.message]])]),Object(c["createVNode"])("div",v,[Object(c["createVNode"])("button",{type:"button",class:"\n                btn btn-outline-secondary\n                py-2\n                fz-2 fz-ssm-3\n                col-10 col-sm-5\n                d-flex\n                justify-content-center\n                align-items-center\n              ",onClick:t[7]||(t[7]=function(t){return e.$router.push("/carts")})},[y]),Object(c["createVNode"])("button",{ref:"formBtn",type:"submit",disabled:1==ne.loadingStatue.sendOrder,class:"\n                btn btn-primary\n                py-2\n                fz-2 fz-ssm-3\n                col-10 col-sm-5\n                d-flex\n                justify-content-center\n                align-items-center\n              "},[Object(c["createVNode"])("span",{class:[{"d-none":1!==ne.loadingStatue.sendOrder},"spinner-border spinner-border-sm"],role:"status","aria-hidden":"true"},null,2),x],8,["disabled"])]),Object(c["createVNode"])("div",S,[Object(c["createVNode"])("div",M,[Object(c["createVNode"])("span",k,[w,Object(c["createVNode"])("p",L,Object(c["toDisplayString"])(null==ne.cartList.final_total?"NT$ 0":"NT $ ".concat(e.$toComma(Math.floor(ne.cartList.final_total)+ne.shipping))),1)]),Object(c["createVNode"])("button",{type:"submit",disabled:1==ne.loadingStatue.sendOrder,class:"\n                  btn btn-primary\n                  py-2\n                  fz-2 fz-ssm-3\n                  col-5\n                  btn-right btn-primary-mobile\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                "},[Object(c["createVNode"])("span",{class:[{"d-none":1!==ne.loadingStatue.sendOrder},"spinner-border spinner-border-sm"],role:"status","aria-hidden":"true"},null,2),C],8,["disabled"])])])]})),_:1},8,["onSubmit"])]),Object(c["createVNode"])("div",D,[Object(c["createVNode"])("ul",_,[z,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(ne.cartList.carts,(function(t,a){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:"Car_".concat(a)},[Object(c["createVNode"])("div",$,[Object(c["createVNode"])("div",T,[Object(c["createVNode"])("div",B,[Object(c["createVNode"])("img",{class:"cart-img object-sm-fit",style:{width:"48px",height:"100%","object-fit":"cover"},src:t.product.imageUrl,alt:t.product.title},null,8,["src","alt"])]),Object(c["createVNode"])("div",I,[Object(c["createVNode"])("h5",U,Object(c["toDisplayString"])(t.product.title),1),Object(c["createVNode"])("span",A,[Object(c["createVNode"])("p",R,[Object(c["createVNode"])("small",F,Object(c["toDisplayString"])("NT$ ".concat(e.$toComma(t.product.price)," / ").concat(t.product.unit," ")),1)]),Object(c["createVNode"])("p",q,Object(c["toDisplayString"])("X ".concat(t.qty)),1)])])])])])})),128)),P,Object(c["createVNode"])("li",null,[Object(c["createVNode"])("form",{class:"input-group mb-3",onSubmit:t[9]||(t[9]=Object(c["withModifiers"])((function(){return re.useCoupon&&re.useCoupon.apply(re,arguments)}),["prevent"]))},[Object(c["withDirectives"])(Object(c["createVNode"])("input",{class:"form-control border-primary text-primary",type:"text",placeholder:"請輸入優惠碼","aria-label":"Recipient's username","aria-describedby":"button-coupon",required:"","onUpdate:modelValue":t[8]||(t[8]=function(e){return ne.couponCode=e})},null,512),[[c["vModelText"],ne.couponCode]]),E],32)]),Object(c["createVNode"])("li",null,[Object(c["createVNode"])("span",Z,[J,Object(c["createVNode"])("p",X,Object(c["toDisplayString"])("NT $ ".concat(e.$toComma(Math.floor(ne.cartList.total)))),1)])]),Object(c["createVNode"])("li",null,[Object(c["createVNode"])("span",G,[H,Object(c["createVNode"])("p",K,Object(c["toDisplayString"])("NT $ ".concat(e.$toComma(ne.shipping))),1)])]),Object(c["createVNode"])("li",null,[Object(c["createVNode"])("span",Q,[W,Object(c["createVNode"])("p",Y,Object(c["toDisplayString"])("NT $ -".concat(e.$toComma(Math.floor(ne.cartList.total)-Math.floor(ne.cartList.final_total)))),1)])]),ee,Object(c["createVNode"])("li",null,[Object(c["createVNode"])("span",te,[ae,Object(c["createVNode"])("p",ce,Object(c["toDisplayString"])(null==ne.cartList.final_total?"NT$ 0":"NT $ ".concat(e.$toComma(Math.floor(ne.cartList.final_total)+ne.shipping))),1)])])])])])]),se,Object(c["createVNode"])(be,{isVueLoading:ne.isLoading},null,8,["isVueLoading"])],64)})),ne=a("98ab"),re=a("3a5e"),le=a("e689"),ie={components:{Alert:ne["a"],Loading:re["a"]},data:function(){return{alertMessage:"",alertStatus:!1,isLoading:!1,cartList:{},cartsNum:0,loadingStatue:{sendOrder:"",coupon:""},couponCode:"",couponPrice:0,user:{},cartStep:2,userData:{user:{name:"",email:"",tel:"",address:""},message:""},island:"本島",shipping:0,orderId:""}},methods:{getCartList:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("sim322on","/cart")).then((function(t){t.data.success?(e.cartList=t.data.data,e.chgCartStep(),e.isLoading=!1):(e.alertMessage=t.data.message,e.alertStatus=!1,setTimeout((function(){e.alertMessage="",e.alertStatus=!1}),2e3),e.isLoading=!1)})).catch((function(t){e.alertMessage=t.data.message,e.alertStatus=!1,setTimeout((function(){e.alertMessage="",e.alertStatus=!1}),2e3),e.isLoading=!1}))},useCoupon:function(){var e=this;this.loadingStatue.coupon=1;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sim322on","/coupon");this.$http.post(t,{data:{code:""===this.couponCode?"origin":this.couponCode}}).then((function(t){t.data.success?(e.couponPrice=t.data.data.final_total,e.couponCode="",e.alertMessage=t.data.message,e.alertStatus=!0,setTimeout((function(){e.alertMessage="",e.alertStatus=!1}),2e3),e.getCartList(),e.loadingStatue.coupon="",e.isLoading=!1):(e.alertMessage=t.data.message,e.alertStatus=!1,setTimeout((function(){e.alertMessage="",e.alertStatus=!1}),2e3),e.loadingStatue.coupon="",e.couponCode="")})).catch((function(t){e.alertMessage=t.data.message,e.alertStatus=!1,setTimeout((function(){e.alertMessage="",e.alertStatus=!1}),2e3),e.loadingStatue.coupon="",e.couponCode=""}))},sendOrder:function(){var e=this;this.loadingStatue.sendOrder=1;var t={data:{user:{name:this.userData.user.name,email:this.userData.user.email,tel:this.userData.user.tel,address:this.userData.user.address},message:"".concat(this.userData.message," //splitValue//finally_total//splitValue//").concat(Math.floor(this.cartList.final_total)+this.shipping,"//splitValue//shipping//splitValue//").concat(this.shipping,"//splitValue//couponPrice//splitValue//").concat(Math.floor(this.cartList.total)-Math.floor(this.cartList.final_total))},prd:{shipping:this.shipping}};this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("sim322on","/order"),t).then((function(t){t.data.success?(e.alertMessage=t.data.message,e.alertStatus=!0,setTimeout((function(){e.alertMessage="",e.alertStatus=!1}),2e3),e.loadingStatue.sendOrder="",e.orderId=t.data.orderId,le["a"].emit("refresh-carts"),e.$router.push("/payment/".concat(e.orderId))):(e.alertMessage=t.data.message,e.alertStatus=!1,setTimeout((function(){e.alertMessage="",e.alertStatus=!1}),2e3),e.loadingStatue.sendOrder="")})).catch((function(t){e.alertMessage=t.data.message,e.alertStatus=!1,setTimeout((function(){e.alertMessage="",e.alertStatus=!1}),2e3),e.loadingStatue.coupon=""}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要輸入正確的手機號碼"},isEmail:function(e){var t=/^([a-zA-Z0-9_.\-+])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return!!t.test(e)||"需要輸入正確的信箱"},calculateshipping:function(){"本島"===this.island?Math.floor(this.cartList.total)<2500?this.shipping=180:Math.floor(this.cartList.total)>=2500&&Math.floor(this.cartList.total)<3500?this.shipping=150:this.shipping=0:"離島"===this.island?Math.floor(this.cartList.total)<2500?this.shipping=280:Math.floor(this.cartList.total)<3500&&Math.floor(this.cartList.total)>=2500?this.shipping=250:this.shipping=0:this.shipping=123,this.isLoading=!1},chgCartStep:function(){le["a"].emit("chg-cart-step",this.cartStep)}},watch:{island:function(){this.calculateshipping()}},created:function(){this.chgCartStep(),this.getCartList()},mounted:function(){var e=this;setTimeout((function(){e.calculateshipping()}),500)}};a("e9c1");ie.render=oe,ie.__scopeId="data-v-a4a6446e";t["default"]=ie},e689:function(e,t,a){"use strict";var c=function(e){return{all:e=e||new Map,on:function(t,a){var c=e.get(t);c?c.push(a):e.set(t,[a])},off:function(t,a){var c=e.get(t);c&&(a?c.splice(c.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var c=e.get(t);c&&c.slice().map((function(e){e(a)})),(c=e.get("*"))&&c.slice().map((function(e){e(t,a)}))}}},s=c();t["a"]=s},e9c1:function(e,t,a){"use strict";a("309d")}}]);
//# sourceMappingURL=chunk-1748a4ec.5a55b4a0.js.map